import pandas as pd
import matplotlib.pyplot as plt
from matplotlib.ticker import ScalarFormatter

# Assuming you have your data in a pandas DataFrame, you can create it like this:
data = [
    ["Numero_compte1", "2023-10-28", 100.50],
    ["Numero_compte2", "2023-10-28", 75.25],
    # Add more rows with data here
]
columns = ["Numero_compte", "date_op_gab", "Montant_mvt_comptable"]
data_tend = pd.DataFrame(data, columns=columns)

# Convert the date column to datetime format
data_tend["date_op_gab"] = pd.to_datetime(data_tend["date_op_gab"])

# Group the data by date and calculate the total transaction amount
daily_usage = data_tend.groupby(data_tend["date_op_gab"].dt.year)["Montant_mvt_comptable"].sum()

# Create a Line plot to visualize the tendency
plt.figure(figsize=(10, 6))

plt.plot(daily_usage.index, daily_usage.values, marker='o')

plt.xlabel("Year")
plt.ylabel("Total Transaction Amount")
plt.title("Visa Card Usage Tendency")

# Format the x-axis tick labels to display years as integers
plt.xticks(daily_usage.index, [int(year) for year in daily_usage.index])

# Format the y-axis to avoid scientific notation
plt.gca().get_yaxis().set_major_formatter(ScalarFormatter(useOffset=False))

plt.tight_layout()
plt.show()
